require=function e(t,i,s){function c(n,r){if(!i[n]){if(!t[n]){var a="function"==typeof require&&require;if(!r&&a)return a(n,!0);if(o)return o(n,!0);var h=new Error("Cannot find module '"+n+"'");throw h.code="MODULE_NOT_FOUND",h}var d=i[n]={exports:{}};t[n][0].call(d.exports,function(e){var i=t[n][1][e];return c(i||e)},d,d.exports,e,t,i,s)}return i[n].exports}for(var o="function"==typeof require&&require,n=0;n<s.length;n++)c(s[n]);return c}({ball:[function(e,t,i){"use strict";cc._RF.push(t,"c73f5gAsEdAHoETtLRhC102","ball");var s=cc.Enum({NONE:0,NORMAL:1,THUMP:2,DEAD:3});cc.Class({extends:cc.Component,properties:{movespeed:0,speedY:0,gravity:0,state:{default:s.NONE,type:s,visible:!1},crashSound:cc.AudioClip},init:function(e){this.game=e,this.state=s.NORMAL,this.life=this.game.lifeLabel.string,this.oBallX=this.node.x,this.oBallY=this.node.y,this.registerInput()},onCollisionEnter:function(e,t){this.state==s.NORMAL&&(this.state=s.THUMP,100==e.tag&&(this.game.gainScore(),this.game.levelUp(),this.onStair=!0),200!=e.tag&&300!=e.tag&&101!=e.tag||(cc.audioEngine.playEffect(this.crashSound),this.die()))},onCollisionExit:function(e,t){this.state=s.NORMAL,this.onStair=!1,this.speedY=0},registerInput:function(){var e=this;cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,onKeyPressed:function(t,i){switch(t){case cc.KEY.a:e.moveLeft=!0;break;case cc.KEY.d:e.moveRight=!0}},onKeyReleased:function(t,i){switch(t){case cc.KEY.a:e.moveLeft=!1;break;case cc.KEY.d:e.moveRight=!1}}},e.node)},die:function(){this.state=s.DEAD,this.node.color=cc.Color.RED,this.life--,this.game.lifeLabel.string=this.life,0==this.life?this.game.stopGame():this.recover()},recover:function(){this.state=s.NORMAL,this.node.color=cc.Color.WHITE,this.node.x=this.oBallX,this.node.y=this.oBallY},update:function(e){this.node.x<=-290&&(this.node.x=-290),this.node.x>=285&&(this.node.x=285),this.state!=s.NONE&&this.state!=s.DEAD&&(this.moveLeft||this.moveRight?this.moveLeft&&this.moveRight?this.speedX=0:this.moveLeft&&!this.moveRight?this.speedX=-this.movespeed:!this.moveLeft&&this.moveRight&&(this.speedX=this.movespeed):this.speedX=0,this.node.x+=this.speedX*e,this.state==s.NORMAL?(this.speedY+=this.gravity*e,this.node.y-=this.speedY*e,this.game.cameramanager.moveBg(this.speedY*e)):this.state==s.THUMP&&1==this.onStair&&(this.node.y+=this.game.cameramanager.layerSpeed*e))}}),cc._RF.pop()},{}],cameramanager:[function(e,t,i){"use strict";cc._RF.push(t,"4e86eMshXVK94MYoqaMn+0/","cameramanager"),cc.Class({extends:cc.Component,properties:{cloud:cc.Node,cloudRelSpeed:0,cloudOffY:0,prefabLayer:cc.Node,layerSpeed:0},init:function(e){this.game=e,this.oCloudY=this.cloud.y},moveBg:function(e){this.cloud.y+=e*this.cloudRelSpeed,this.cloud.y>this.cloudOffY-this.oCloudY&&(this.cloud.y=this.oCloudY)},update:function(e){3!=this.game.ball.state&&(this.prefabLayer.y+=e*this.layerSpeed)}}),cc._RF.pop()},{}],game:[function(e,t,i){"use strict";cc._RF.push(t,"8347659YYNOV4vKhe7WUb6H","game");var s=e("ball"),c=e("cameramanager"),o=e("prefabmanager");cc.Class({extends:cc.Component,properties:{levDegree:0,ball:s,cameramanager:c,prefabmanager:o,scoreLabel:cc.Label,lifeLabel:cc.Label,gameOverMenu:cc.Node,overScore:cc.Label,bgSound:cc.AudioClip,scoreSound:cc.AudioClip,crashSound:cc.AudioClip,overSound:cc.AudioClip},onLoad:function(){cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,onKeyPressed:function(e,t){e==cc.KEY.back&&cc.director.loadScene("Menu")}},this.node),this.startGame()},startGame:function(){cc.director.getCollisionManager().enabled=!0,this.score=0,this.scoreLabel.string="SCORE:0",this.lifeLabel.string="2",this.cameramanager.init(this),this.prefabmanager.init(this),this.ball.init(this),cc.audioEngine.playMusic(this.bgSound,!0)},stopGame:function(){cc.director.getCollisionManager().enabled=!1,cc.audioEngine.stopMusic(this.bgSound),cc.audioEngine.playMusic(this.overSound),this.gameOverMenu.active=!0,this.overScore.string="FINAL SCORE  "+this.score,cc.find("Record").getComponent("record").updateScore(this.score)},gainScore:function(){cc.audioEngine.playEffect(this.scoreSound),this.score+=10,this.scoreLabel.string="SCORE:"+this.score},levelUp:function(){this.levDegree>=.5&&(this.levDegree=.5),this.levDegree+=.005},toMenu:function(){cc.director.loadScene("MenuScene")}}),cc._RF.pop()},{ball:"ball",cameramanager:"cameramanager",prefabmanager:"prefabmanager"}],menu:[function(e,t,i){"use strict";cc._RF.push(t,"9c7e1eUxvxMaLkQVh28quS5","menu"),cc.Class({extends:cc.Component,properties:{bgSound:cc.AudioClip,btnSound:cc.AudioClip,bestScore:cc.Label,historyNode:cc.Node,cloud:cc.Node,cloudSpeed:0},onLoad:function(){cc.audioEngine.playMusic(this.bgSound,!0),this.record=cc.find("Record").getComponent("record"),this.bestScore.string="SCORE "+this.record.bestScore;var e=this;cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,onKeyPressed:function(t,i){t==cc.KEY.back&&(e.record.save(),cc.director.end())}},e.node)},onBtnStart:function(){cc.audioEngine.playEffect(this.btnSound),cc.director.loadScene("GameScene")},onBtnScore:function(){this.historyNode.active=!0},onBtnReturn:function(){this.historyNode.active=!1},update:function(e){this.cloud.y+=this.cloudSpeed*e}}),cc._RF.pop()},{}],prefabmanager:[function(e,t,i){"use strict";cc._RF.push(t,"2b634YcLXpP55AXutuq28k2","prefabmanager"),cc.Class({extends:cc.Component,properties:{stairPre:cc.Prefab,stairKillerPre:cc.Prefab,prefabLayer:cc.Node,stairSpace:0,oStairY:0,stairCount:0},init:function(e){this.game=e,this.stairPool=new cc.NodePool,this.stairKillerPool=new cc.NodePool;for(t=0;t<8;t++)this.stairPool.put(cc.instantiate(this.stairPre));for(t=0;t<4;t++)this.stairKillerPool.put(cc.instantiate(this.stairKillerPre));this.currentStairY=this.oStairY;for(var t=0;t<8;t++)this.newStair();cc.director.getCollisionManager().enabled=!0},onCollisionEnter:function(e,t){100===e.tag&&this.desStair(e.node),101===e.tag&&this.desStairKiller(e.node)},newStair:function(){this.stairCount+=1;var e=null,t=cc.random0To1();t>this.game.levDegree?e=this.stairPool.size()>0?this.stairPool.get():cc.instantiate(this.stairPre):t<=this.game.levDegree&&(e=this.stairKillerPool.size()>0?this.stairKillerPool.get():cc.instantiate(this.stairKillerPre)),this.prefabLayer.addChild(e);var i=500*cc.random0To1()-250,s=this.currentStairY;e.setPosition(i,s),this.currentStairY-=this.stairSpace},desStair:function(e){this.stairPool.put(e),this.newStair()},desStairKiller:function(e){this.stairKillerPool.put(e),this.newStair()}}),cc._RF.pop()},{}],record:[function(e,t,i){"use strict";cc._RF.push(t,"a3612Ukfo1Fbp6z1G8ocoWE","record"),cc.Class({extends:cc.Component,properties:{bestScore:0},onLoad:function(){cc.game.addPersistRootNode(this.node);var e=cc.sys.localStorage.getItem("bestScore");e&&(this.bestScore=e)},updateScore:function(e){e>this.bestScore&&(this.bestScore=e)},save:function(){cc.sys.localStorage.setItem("bestScore",this.bestScore)}}),cc._RF.pop()},{}]},{},["ball","cameramanager","game","menu","prefabmanager","record"]);